{"version":3,"sources":["uni-app:///main.js","webpack:///D:/git-projects/daguanjia/daguanjia-uniapp/daguanjia-uniapp/pages/boardbook/boardbook_form.vue?987e","webpack:///D:/git-projects/daguanjia/daguanjia-uniapp/daguanjia-uniapp/pages/boardbook/boardbook_form.vue?21a3","webpack:///D:/git-projects/daguanjia/daguanjia-uniapp/daguanjia-uniapp/pages/boardbook/boardbook_form.vue?96ff","webpack:///D:/git-projects/daguanjia/daguanjia-uniapp/daguanjia-uniapp/pages/boardbook/boardbook_form.vue?bc14","uni-app:///pages/boardbook/boardbook_form.vue"],"names":["createPage","Page"],"mappings":"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","file":"pages/boardbook/boardbook_form.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/boardbook/boardbook_form.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./boardbook_form.vue?vue&type=template&id=613dfced&\"\nvar renderjs\nimport script from \"./boardbook_form.vue?vue&type=script&lang=js&\"\nexport * from \"./boardbook_form.vue?vue&type=script&lang=js&\"\nimport style0 from \"@/static/styles/common_form.scss?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../HBuilderX-alpha/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/boardbook/boardbook_form.vue\"\nexport default component.exports","export * from \"-!../../../../../../HBuilderX-alpha/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../HBuilderX-alpha/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../HBuilderX-alpha/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../HBuilderX-alpha/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../HBuilderX-alpha/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX-alpha/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./boardbook_form.vue?vue&type=template&id=613dfced&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../HBuilderX-alpha/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX-alpha/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../HBuilderX-alpha/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX-alpha/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX-alpha/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./boardbook_form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../HBuilderX-alpha/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX-alpha/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../HBuilderX-alpha/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX-alpha/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX-alpha/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./boardbook_form.vue?vue&type=script&lang=js&\"","<template>\n\n  <view class=\"container\">\n    <view class=\"grid\">\n      <input hidden name=\"boardroomBookId\" :value=\"book.boardroomBookId\"></input>\n      <view class=\"item\">\n        <view class=\"item-name\">会议室名称</view>\n        <input :value=\"book.roomName\" disabled=\"true\"></input>\n      </view>\n      <view class=\"item\" :hidden=\"book.boardroomBookId == 0\">\n        <view class=\"item-name\">申请人</view>\n        <input :value=\"book.userName\" disabled=\"true\"></input>\n      </view>\n      <view class=\"item\">\n        <view class=\"item-name\">会议主题</view>\n        <input :value=\"book.title\" @input=\"bindKeyTitle\" maxlength=\"60\" placeholder=\"会议主题（选填）\" :disabled=\"audit\"></input>\n      </view>\n      <view class=\"item\">\n        <view class=\"item-name\">预约日期</view>\n        <input type=\"number\" :value=\"book.bookDate\" disabled=\"true\"></input>\n      </view>\n      <view class=\"item\">\n        <view class=\"item-name\">预约开始时间</view>\n        <picker mode=\"multiSelector\" @change=\"bindKeyStartTime\" @columnchange :value=\"startTimeIndex\" :range=\"multiArray\" :disabled=\"audit\">\n          <view style=\"display: flex;justify-content: flex-end;\">\n            <input :value=\"book.startTime\" placeholder=\"选择开始时间\" disabled=\"true\"></input>\n            <view class=\"iconfont icon-time\" style=\"color: #0095F2;font-size:40rpx;;padding-left: 10rpx;\"></view>\n          </view>\n        </picker>\n      </view>\n      <view class=\"item\">\n        <view class=\"item-name\">预约结束时间</view>\n        <picker mode=\"multiSelector\" @change=\"bindKeyEndTime\" @columnchange :value=\"endTimeIndex\" :range=\"multiArray\" :disabled=\"audit\">\n          <view style=\"display: flex;justify-content: flex-end;\">\n            <input :value=\"book.endTime\" placeholder=\"选择结束时间\" disabled=\"true\"></input>\n            <view class=\"iconfont icon-time\" style=\"color: #0095F2;font-size:40rpx;padding-left: 10rpx;\"></view>\n          </view>\n        </picker>\n      </view>\n      <view class=\"textarea\">\n        <textarea placeholder-class=\"place-class\" @input=\"bindKeyRemark\" :value=\"book.remark\" placeholder=\"备注\" :disabled=\"audit\"></textarea>\n      </view>\n      <view class=\"textarea\" :hidden=\"book.boardroomBookId == 0\">\n        <textarea placeholder-class=\"place-class\" @input=\"bindKeyReject\" :value=\"book.rejectResion\" placeholder=\"驳回原因\" :disabled=\"!audit\"></textarea>\n      </view>\n    </view>\n    <view class=\"btn-box\">\n      <view class=\"biz-btn\" @tap=\"del\" :hidden=\"book.boardroomBookId == 0 || audit\">取消预约</view>\n      <view class=\"biz-btn\" @tap=\"reject\" :hidden=\"!audit\">驳回</view>\n      <view class=\"biz-btn save\" @tap=\"agree\" :hidden=\"!audit\">审核通过</view>\n      <view class=\"biz-btn save\" @tap=\"submit\" :hidden=\"audit\">{{book.boardroomBookId == 0?\"提交预约\":\"修改预约\"}}</view>\n    </view>\n  </view>\n\n</template>\n\n<script>\nimport wxRequest from '@/utils/wxRequest';\nimport Host from '@/utils/host';\nimport tip from '@/utils/tip';\nimport dateUtil from '@/utils/date-util';\nimport Session from '@/utils/session';\nconst hours = ['00', '01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23'];\nconst minutes = ['00', '05', '10', '15', '20', '25', '30', '35', '40', '45', '50', '55'];\n\nexport default {\n  data() {\n    return {\n\n        book: {\n          boardroomBookId: 0,\n          boardroomId: '',\n          roomName: '',\n          title: '',\n          bookDate: '',\n          startTime: '',\n          endTime: '',\n          remark: '',\n          userIds: '',\n          userName: '',\n          rejectResion: ''\n        },\n        multiArray: [hours, minutes],\n        startTimeIndex: [0, 0],\n        endTimeIndex: [0, 0],\n        audit: false,\n        users: []\n\n    };\n  },\n\n  onLoad(options) {\n    if (options.id == undefined) {\n      this.book.bookDate = options.bookDate;\n      this.book.boardroomId = options.boardroomId;\n      this.book.roomName = options.roomName;\n      this.book.startTime = options.time + \":00\";\n      this.book.endTime = parseInt(options.time) + 1 + \":00\";\n      this.startTimeIndex = [parseInt(options.time), 0];\n      this.endTimeIndex = [parseInt(options.time) + 1, 0];\n    } else {\n      this.audit = options.audit == undefined ? false : true;\n      this.getBook(options.id);\n    }\n  },\n\n  mixins: [],\n  components: {},\n  props: {},\n  methods: {\n    bindKeyTitle(e) {\n      this.book.title = e.detail.value;\n    },\n\n    bindKeyStartTime(e) {\n      let hour = this.data.multiArray[0][e.detail.value[0]];\n      let minute = this.data.multiArray[1][e.detail.value[1]];\n      this.book.startTime = hour + \":\" + minute;\n    },\n\n    bindKeyEndTime(e) {\n      let hour = this.data.multiArray[0][e.detail.value[0]];\n      let minute = this.data.multiArray[1][e.detail.value[1]];\n      this.book.endTime = hour + \":\" + minute;\n    },\n\n    bindKeyRemark(e) {\n      this.book.remark = e.detail.value;\n    },\n\n    bindKeyReject(e) {\n      this.book.rejectResion = e.detail.value;\n    },\n\n    async del() {\n      await tip.confirm('确认取消此会议室的预约吗！', {}, '警告');\n      const data = await wxRequest.Get(`daguanjia/unsubscribeBoardroom/`, {\n        boardroomBookId: this.book.boardroomBookId\n      });\n\n      if (data != undefined && data.code >= 1) {\n        if (data.message != undefined && data.message != '') {\n          tip.error(data.message);\n        }\n\n        Session.set('refresh', true);\n        uni.navigateBack({\n          delta: 1\n        });\n      } else {\n        tip.error(data.message);\n      }\n    },\n\n    async submit() {\n      if (Session.get('user_load_cache').isMemberExpiry) {\n        await tip.confirm('服务已过期，现只有查看权限，请联系您组织内负责此业务的管理员续费后再进行此操作，谢谢！', {}, '服务过期提示', false);\n        return;\n      }\n\n      let cId = this.book.boardroomBookId;\n      let url = 'daguanjia/modifyBoardroomBook';\n\n      if (this.book.boardroomBookId == 0) {\n        url = 'daguanjia/subscribeBoardroom';\n      }\n\n      if (this.book.roomName == '') {\n        tip.error('未选择预约地点');\n        return false;\n      }\n\n      let data = await wxRequest.Get(url, {\n        boardroomBookId: this.book.boardroomBookId,\n        startTime: this.book.bookDate + \" \" + this.book.startTime,\n        endTime: this.book.bookDate + \" \" + this.book.endTime,\n        remark: this.book.remark,\n        title: this.book.title,\n        boardroomId: this.book.boardroomId\n      });\n\n      if (data != undefined && data.code >= 1) {\n        if (data.message != undefined && data.message != '') {\n          tip.success(data.message);\n        }\n\n        Session.set('refresh', true);\n        uni.navigateBack({\n          delta: 1\n        });\n      } else {\n        tip.error(data.message);\n      }\n    },\n\n    async reject() {\n      await tip.confirm('确认驳回此会议室的预约吗！', {}, '警告');\n      const data = await wxRequest.Get(`daguanjia/boardroomReject/`, {\n        boardroomBookId: this.book.boardroomBookId,\n        rejectResion: this.book.rejectResion\n      });\n\n      if (data != undefined && data.code >= 1) {\n        if (data.message != undefined && data.message != '') {\n          tip.success(data.message);\n        }\n\n        Session.set('refresh', true);\n        uni.navigateBack({\n          delta: 1\n        });\n      } else {\n        tip.error(data.message);\n      }\n    },\n\n    async agree() {\n      const data = await wxRequest.Get(`daguanjia/boardroomAgree/`, {\n        boardroomBookId: this.book.boardroomBookId\n      });\n\n      if (data != undefined && data.code >= 1) {\n        if (data.message != undefined && data.message != '') {\n          tip.success(data.message);\n        }\n\n        Session.set('refresh', true);\n        uni.navigateBack({\n          delta: 1\n        });\n      } else {\n        tip.error(data.message);\n      }\n    },\n\n    async getUsers() {\n      const data = await wxRequest.Get('daguanjia/listCompPhoneBook', {\n        py: '',\n        pageNo: ''\n      });\n\n      if (data.status != 404 && typeof data.result !== 'undefined' && data.result.items !== undefined) {\n        if (data.result.items.length == 0) {\n          this.searchNone = true;\n        }\n\n        this.department = [];\n        this.users = [];\n        let deptId = 0;\n        data.result.items.forEach((user, index) => {\n          if (user.deptId != deptId) {\n            user.deptType = true;\n            deptId = user.deptId;\n          }\n\n          if (user.mobile != null && user.mobile != '' && user.mobile != undefined && user.mobile.substring(0, 3) == '100') {\n            user.mobile = '';\n          }\n\n          this.users.push(user);\n        }); //this.result = [...this.result, ...data.result.items];\n      } else {\n        this.users = [];\n      }\n    },\n\n    async getBook(id) {\n      const data = await wxRequest.Get('daguanjia/getBoardroomBook', {\n        boardroomBookId: id\n      });\n\n      if (data != undefined && data.code >= 1) {\n        let book = data.result;\n        this.book.boardroomBookId = book.id;\n        this.book.boardroomId = book.boardroomId;\n        this.book.roomName = book.boardroomName;\n        this.book.bookDate = book.startTime.split(' ')[0];\n        this.book.userName = book.deptName + \"-\" + book.user.name;\n        this.book.remark = book.remark;\n        this.book.title = book.title;\n        this.book.rejectResion = book.rejectResion == undefined ? '' : book.rejectResion; //处理日期回显\n\n        let startTime = book.startTime.split(' ')[1].substring(0, 5);\n        let endTime = book.endTime.split(' ')[1].substring(0, 5);\n        this.book.startTime = startTime;\n        this.book.endTime = endTime;\n        this.startTimeIndex = [parseInt(startTime.split(':')[0]), parseInt(startTime.split(':')[1]) / 5];\n        this.endTimeIndex = [parseInt(endTime.split(':')[0]), parseInt(endTime.split(':')[1]) / 5];\n      } else {\n        tip.error(data.message);\n      }\n    }\n\n  },\n  computed: {\n    host() {\n      return Host.host;\n    }\n\n  },\n  watch: {}\n};\n</script>\n<style lang=\"scss\" src=\"@/static/styles/common_form.scss\">\n\n\n\n</style>"],"sourceRoot":""}